Техническое задание: "Хронология событий" —
Доработка проекта
1. Общее описание
Необходимо расширить существующее приложение "Хронология событий" функционалом
сетевого взаимодействия с использованием UDP мультикаста. Система должна состоять из
двух приложений: основное приложение (сервер-издатель) и клиентское приложение
(слушатель).
2. Основное приложение (Существующий MainWindow +
сетевой функционал)
2.1. Добавить сетевые возможности
• Реализовать отправку событий по UDP мультикасту при добавлении нового события.
• Добавить интерфейс для настройки сетевых параметров:
• Поле ввода мультикаст-адреса (по умолчанию 239.255.0.1).
• Поле ввода порта (по умолчанию 45454).
• CheckBox "Включить отправку по сети".
• Кнопка "Применить настройки".
• Индикатор статуса отправки (зеленый/красный).
2.2. Формат отправляемых данных
При добавлении нового события отправлять JSON-сообщение:
json
{
}
"type": "event_added",
"date": "2024-01-15",
"event": "Название события",
"timestamp": "2024-01-15T10:30:00",
"sender": "имя_компьютера"
2.3. Модификация существующего кода
• Добавить приватные поля:
cpp
private:
QUdpSocket *udpSocket;
QHostAddress multicastAddress;
quint16 multicastPort;
bool networkEnabled;• Модифицировать метод addEvent() для отправки данных по сети.
• Добавить слоты для настройки сети.
3. Клиентское приложение (Новое приложение —
ClientWindow)
3.1. Основные требования
• Создать отдельный проект клиентского приложения.
• Использовать ту же структуру данных QMap<QDate, QSet<QString>> для
хранения полученных событий.
• Реализовать подписку на мультикаст-группу.
• Отображать полученные события в QTreeWidget.
3.2. Интерфейс клиента
text
┌─────────────────────────────────────┐
│ Клиент событий
│
├─────────────────────────────────────┤
│ Настройки приема:
│
│
Мультикаст адрес: [239.255.0.1
]│
│
Порт:
[45454
]│
│
┌────────────┐ ┌─────────────────┐│
│
│Подключиться│ │ Очистить список ││
│
└────────────┘ └─────────────────┘│
│ Статус: ○ Не подключен
│
├─────────────────────────────────────┤
│ Полученные события:
│
│ ┌─────────────────────────────────┐ │
│ │ - 2024-01-15
│ │
│ │
├── Важное событие
│ │
│ │
└── Еще событие
│ │
│ │ - 2024-01-16
│ │
│ │
└── Тестовое событие
│ │
│ └─────────────────────────────────┘ │
│ Всего событий: 3
│
└─────────────────────────────────────┘
3.3. Функционал клиента
• Возможность подключения/отключения от мультикаст-группы.
• Автоматическое отображение полученных событий в дереве.
• Сохранение полученных событий в структуру _storage.
• Сортировка по датам и событиям.
• Очистка списка полученных событий.
• Индикация количества полученных событий.3.4. Обработка входящих данных
• Парсинг JSON-сообщений.
• Проверка валидности данных.
• Добавление событий в _storage клиента.
• Обновление отображения.
3.5. Логирование
• Отображение входящих сообщений в отдельном виджете (QTextEdit).
• Время получения сообщения.
• IP-адрес отправителя.
• Содержимое сообщения.
4. Технические требования
4.1. Протокол взаимодействия
• Использовать UDP мультикаст.
• Поддержка динамического подключения/отключения клиентов.
4.2. Обработка ошибок
• Обработка невозможности подключения к мультикаст-группе.
• Информирование пользователя об ошибках через статусную строку или всплывающие
сообщения.
• Корректное закрытие сокетов при выходе.
4.3. Производительность
• Отсутствие блокировки UI при отправке/получении данных.
• Оптимизация обновления дерева событий.
5. Модифицируемые файлы
Основное приложение:
• mainwindow.h — добавить сетевые поля и методы.
• mainwindow.cpp — реализовать сетевую отправку.
• mainwindow.ui — добавить элементы управления сетью.
Клиентское приложение: (на свое усмотрение)6. Критерии приемки
1. Основное приложение отправляет события по мультикасту.
2. Клиентское приложение получает события и корректно их отображает.
3. Поддерживается несколько клиентов одновременно.
4. Сохраняется вся существующая функциональность основного приложения.
5. Интерфейсы интуитивно понятны.
7. Дополнительные улучшения (по желанию)
• Синхронизация всей базы событий при подключении нового клиента.
• Экспорт полученных событий в файл.
